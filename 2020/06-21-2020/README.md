# Today I Learned

Three weeks into the course and things are finally heating up. We began to take
a deeper dive on the C# language. This week we learned about Generics, Extension
Methods and Exceptions.

Aside from the mentioned topics, Codenation also provided some content about file
reading/writing, Attributes and Reflextion.

## Generics

So, Generics are classes that have a "delayed typing". When you create a new instance
of  the class, you'll need to give a type also, which will be used - ideally -
on the class' methods. You can also limit the types of the Generic class by adding
a "where" clause.

```csharp
public class ClassName<T> where T : ...
```

## Extension Methods

Extension Methods are a way to add new functionality to some type. You can achieve
this by creating a static class - which implies that all the methods will also be
static -, and create methods that will receive a "this <type>" argument to work.

```csharp
public static class MyExtension {
  public static string SomeNewFunctionalityToStringType(this string arg) { ... };
}
```

## Collections, Linq and Lambda

We also took a look at some data structures like Lists, SortedLists, Dictionaries,
Queues and Stacks. There's not a lot to talk about here.

To work with collections - also with Databases - we have the Linq methods. These
are very handy to perform searches, filters, selections... All kinds of data
operations.

They integrate with the Entity Framework nicely.

## C# - StreamReader and StreamWriter

To read/write files in C#, we have the StreamReader and StreamWriter classes. They
implement the TextReader and TextReader classes.

Their use is pretty straight forward, but is worth mentioning that we must always
close a file after working on it (Open() -> Some Operation -> Close()). Also we
need to wrap the operations in a Try/Catch method in case something goes wrong.

## Attributes

I learned about a Attributes concept I was no aware. Attributes extend the metadata
generated by the compiler. We can use the pre existing Attributes (System.Attributes)
or we can create our own. To apply:

```csharp
[SomeAttribute("some information")]
public class MyClass {}
```

We can also apply attributes to methods or properties. Also, there can be attributes
at the assembly.

## Reflection

Not much to write about here. C# has reflection with the System.Reflection and
System.Type, but I really don't know enough about this subject yet.

## Exceptions

It's a mechanic that I'm used to already. So, I'll only write about the good
practices that MS gives on the documentation website:

- Treat exceptions from the most derived to the least derived. This is because
if a base exception is put in front of a derived one, the derived will never be
reached.
  - Also, only throw an exception if it is possible to recover from.
- Clear allocated resources with "using" or "finally".
- Avoid exceptions with common conditions, since they are very "expensive".
- Generate exceptions instead of returning a error code.
- Prefere already defined exceptions.
- All custom exceptions names must end with "Exception".
- Custom exceptions need to have three constructors (check the docs).
- Always include an error message with proper grammar.
- Add additional properties as necessary.
- Position the "throw" key in such a way that the stack is helpful.
- Use constructr exception methods to generate less code.
- Always perform a rollback action if a method is not finished because of an
exception.
